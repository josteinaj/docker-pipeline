name: Example Pipeline
pipeline:
  - test:
      input: input-1
      expect: expect-1
  - test:
      input: input-2
      expect: expect-2
    
  - dockerfile: square
  
  - test:
      input: input-1
      expect: expect-1
  - test:
      input: input-2
      expect: expect-4
      status: success
  - test:
      input: '*'
      status: success
  - assert: success
    
  - dockerfile: square
  
  - test:
      input: input-1
      expect: expect-1
  - test:
      input: input-2
      expect: expect-16
      status: success
  
  - dockerfile: fibonacci
  
  - test:
      input: input-1
      expect: expect-fib-0
  - test:
      input: input-2
      expect: expect-fib-13
  
  - foreach:
      - test:
          input: input-1
          expect: expect-fib-0
      - test:
          input: input-2
          context: 0.txt
          expect: expect-digit-0
      - test:
          input: input-2
          context: 5.txt
          expect: expect-digit-5
      - test:
          input: input-3
          context: 5.txt
          expect: expect-digit-5
      - dockerfile: identity
  
  - test:
      input: input-2
      expect: expect-fib-13-folded
  
  - unfold: 1
  
  - test:
      input: input-1
      expect: expect-fib-0
  - test:
      input: input-2
      expect: expect-fib-13
   